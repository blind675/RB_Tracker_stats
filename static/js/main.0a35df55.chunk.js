(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{163:function(e,t,a){e.exports=a(388)},168:function(e,t,a){},169:function(e,t,a){},388:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),i=a(17),o=a.n(i),r=(a(168),a(92)),c=a(152),s=a(153),d=a(161),u=a(154),m=a(61),b=a(162),p=(a(169),a(91)),g=a.n(p),h=a(39),y=a(157),v=a(160),k=(a(370),a(158)),f={apiKey:"AIzaSyCzenI1WpO2JBbltc3ARFKTCJyUumY-zkk",authDomain:"rbtrack-ab0e9.firebaseapp.com",databaseURL:"https://rbtrack-ab0e9.firebaseio.com",projectId:"rbtrack-ab0e9",storageBucket:"rbtrack-ab0e9.appspot.com",messagingSenderId:"381452575978",appId:"1:381452575978:web:9999b9c4b6d38967"},S=[{label:"",value:null},{label:"Walk",value:"walk"},{label:"Stay",value:"stay"},{label:"Bike / e-Bike",value:"bike"},{label:"Scooter",value:"scooter"},{label:"e-Scooter",value:"e-scooter"},{label:"e-Board",value:"rb"},{label:"e-Board Bad Road",value:"rb-bad"}],E=[{label:"x1",key:"x1"},{label:"y1",key:"y1"},{label:"z1",key:"z1"},{label:"x2",key:"x2"},{label:"y2",key:"y2"},{label:"z2",key:"z2"},{label:"x3",key:"x3"},{label:"y3",key:"y3"},{label:"z3",key:"z3"},{label:"x4",key:"x4"},{label:"y4",key:"y4"},{label:"z4",key:"z4"},{label:"x5",key:"x5"},{label:"y5",key:"y5"},{label:"z5",key:"z5"},{label:"altitude",key:"altitude"},{label:"accuracy",key:"accuracy"},{label:"manufacturer",key:"manufacturer"},{label:"label",key:"label"}],D=Object(h.withScriptjs)(Object(h.withGoogleMap)(function(e){return n.a.createElement(h.GoogleMap,{defaultZoom:16,defaultCenter:{lat:45.757855,lng:21.228995}},e.isMarkerShown&&e.markers)})),P=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={locations:[],loading:!1,selectedPoint:null,selectedActionAtPoint:null,csvData:null},a.csvFileName="RBStats.csv",a._updatePoint=a._updatePoint.bind(Object(m.a)(a)),a}return Object(b.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.db=k.initializeApp(f);var e=new Date,t=e.getDate()+"-"+(e.getMonth()+1)+"-"+e.getFullYear();this.csvFileName="RBStats-"+t+".csv",this._reloadFirebaseData()}},{key:"_reloadFirebaseData",value:function(){var e=this;this.setState({loading:!0}),this.db.firestore().collection("geo_points").get().then(function(t){var a=t.docs.map(function(e){return Object(r.a)({},e.data(),{id:e.id})});e.setState({loading:!1,locations:a}),e._createCSVData(a)}).catch(function(t){e.setState({loading:!1,locations:[]}),console.log("error:",t)})}},{key:"_createCSVData",value:function(e){var t=[];e.forEach(function(e){t.push({x1:String(e.accelerometerData[0].x),y1:String(e.accelerometerData[0].y),z1:String(e.accelerometerData[0].z),x2:String(e.accelerometerData[1].x),y2:String(e.accelerometerData[1].y),z2:String(e.accelerometerData[1].z),x3:String(e.accelerometerData[2].x),y3:String(e.accelerometerData[2].y),z3:String(e.accelerometerData[2].z),x4:String(e.accelerometerData[3].x),y4:String(e.accelerometerData[3].y),z4:String(e.accelerometerData[3].z),x5:String(e.accelerometerData[4].x),y5:String(e.accelerometerData[4].y),z5:String(e.accelerometerData[4].z),altitude:String(e.altitude),accuracy:String(e.accuracy),manufacturer:e.manufacturer,label:e.label})}),console.log("CSV DATA:",t),this.setState({csvData:t})}},{key:"_updatePoint",value:function(){if(this.state.selectedActionAtPoint){var e=this.db.firestore().collection("geo_points").doc(this.state.selectedPoint.id),t=Object(r.a)({},this.state.selectedPoint,{label:this.state.selectedActionAtPoint.value});e.update(t)}else alert(" Please select an action did at a location. ")}},{key:"_renderDownloadCSVButton",value:function(){return this.state.csvData?n.a.createElement("div",{id:"downloadDiv"},n.a.createElement(y.CSVLink,{style:{margin:12},data:this.state.csvData,filename:this.csvFileName,headers:E},"Download .CSV"),n.a.createElement("p",null,"After that please upload to Google Drive.")):null}},{key:"_renderPoints",value:function(){var e=this;return this.state.locations.map(function(t){var a="http://maps.google.com/mapfiles/ms/icons/red-dot.png";switch(t.label){case"walk":a="http://maps.google.com/mapfiles/kml/paddle/wht-blank-lv.png";break;case"stay":a="http://maps.google.com/mapfiles/kml/paddle/wht-square-lv.png";break;case"bike":a="http://maps.google.com/mapfiles/kml/paddle/purple-circle-lv.png";break;case"scooter":a="http://maps.google.com/mapfiles/kml/paddle/blu-circle-lv.png";break;case"e-scooter":a="http://maps.google.com/mapfiles/kml/paddle/blu-stars-lv.png";break;case"rn":a="http://maps.google.com/mapfiles/kml/paddle/grn-diamond-lv.png";break;case"rb-bad":a="http://maps.google.com/mapfiles/kml/paddle/red-diamond-lv.png";break;default:a="http://maps.google.com/mapfiles/ms/icons/red-dot.png"}return n.a.createElement(h.Marker,{position:{lat:t.latitude,lng:t.longitude},onClick:function(){e.setState({selectedPoint:t})},name:"Test",title:"Test marker",key:t.id,icon:{url:a}})})}},{key:"_renderSelectedPoint",value:function(){var e=this;return this.state.selectedPoint?this.state.selectedPoint.label?n.a.createElement("div",{style:{display:"flex",flex:1,flexDirection:"column",margin:12}},n.a.createElement("label",null,"Latitude: ",this.state.selectedPoint.latitude," "),n.a.createElement("label",null,"Longitude: ",this.state.selectedPoint.longitude," "),n.a.createElement("label",null,"Accuracy: ",this.state.selectedPoint.accuracy," "),n.a.createElement("br",null),n.a.createElement("label",null,"UniqueId: ",this.state.selectedPoint.uniqueId," "),n.a.createElement("label",null,"Manufacturer: ".concat(this.state.selectedPoint.manufacturer)),n.a.createElement("label",null,"Action did at location: ",n.a.createElement("b",null,this.state.selectedPoint.label))):n.a.createElement("div",{style:{display:"flex",flex:1,flexDirection:"column",margin:12}},n.a.createElement("label",null,"Latitude: ",this.state.selectedPoint.latitude," "),n.a.createElement("label",null,"Longitude: ",this.state.selectedPoint.longitude," "),n.a.createElement("label",null,"Accuracy: ",this.state.selectedPoint.accuracy," "),n.a.createElement("br",null),n.a.createElement("label",null,"UniqueId: ",this.state.selectedPoint.uniqueId," "),n.a.createElement("label",null,"Manufacturer: ".concat(this.state.selectedPoint.manufacturer)),n.a.createElement("label",null,"Select action did at location : "),n.a.createElement(v.a,{options:S,onChange:function(t){console.log("  value:",t),e.setState({selectedActionAtPoint:t})}}),n.a.createElement(g.a,{variant:"primary",onClick:this._updatePoint,style:{hight:60,width:200,display:"flex",flex:1,marginTop:16,marginBottom:16}},"Update")):null}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{id:"mainDiv"},n.a.createElement("div",{id:"headerDiv"}),n.a.createElement("div",{id:"rowDiv"},n.a.createElement("div",{id:"mapDiv"},n.a.createElement(D,{isMarkerShown:!0,googleMapURL:"https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places",loadingElement:n.a.createElement("div",{style:{height:"100%"}}),containerElement:n.a.createElement("div",{style:{height:"100%"}}),mapElement:n.a.createElement("div",{style:{height:"100%"}}),markers:this._renderPoints()})),n.a.createElement("div",{id:"statsDiv"},n.a.createElement("h3",{align:"center"}," Selected Point "),this._renderSelectedPoint())),n.a.createElement("div",{id:"reloadDiv"},n.a.createElement(g.a,{variant:"primary",disabled:this.state.loading,onClick:function(){e._reloadFirebaseData()},style:{margin:12}},"Reload"),n.a.createElement("label",null,this.state.loading?"loading...":"not loading")),this._renderDownloadCSVButton())}}]),t}(l.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[163,1,2]]]);
//# sourceMappingURL=main.0a35df55.chunk.js.map